[env:build]
compulsory=false
description=Basic compilation settings.
ns=env/build
sort-key=d
title=Basic compilation

[env:compilation]
compulsory=false
description=Override default compilers and compiler flags.
ns=env/compilation
sort-key=g
title=Advanced compilation

[env:config]
compulsory=false
description=Select the fcm-make configuration files.
ns=env/config
sort-key=a
title=Configuration file

[env:extract]
compulsory=false
description=Source extract locations.
ns=env/extract
sort-key=c
title=Sources

[env:keys]
compulsory=false
description=Platform- and build-specific pre-processing.
ns=env/keys
sort-key=f
title=Pre-processing

[env:paths]
compulsory=false
description=External include and library paths.
ns=env/paths
sort-key=e
title=External libraries

[env:steps]
compulsory=false
description=Extract, mirror and compile steps.
ns=env/steps
sort-key=b
title=Make steps

[env=cc]
compulsory=false
description=C compiler.
help=The name or full path to the C compiler.
ns=env/compilation
sort-key=b1

[env=ccflags]
compulsory=false
description=C compiler flags.
help=A space-separated list of C compiler flags.
    =
    =Setting this variable will replace any existing default flags.
ns=env/compilation
sort-key=b2

[env=cice_base]
compulsory=false
description=CICE base extract source.
help=The basename for the extract of the CICE source code, i.e. the place
    =in the CICE project tree to take the primary extract from, such as
    =the trunk or a branch. Defaults to "trunk".
    =
    =Unless a path to a Subversion repository is specified this is taken
    =to be relative to the location defined by env=cice_project_location.
    =
    =This is the source code against which your branches, working
    =copies etc. will be compared against and merged with prior to the
    =build. To build directly from a branch instead of merging changes
    =into the trunk, use e.g.
    =    branches/dev/user/vn4.1m1_trunk_override.
    =
    =Use env=cice_rev to specify the revision of the base extract and
    =env=cice_path_incl to specify which directories of the full source
    =tree to extract.
    =
    =Using an FCM keyword or Subversion URL here will override the value
    =of env=cice_project_location for the primary extract only (i.e. not
    =for any branches). If all your source code lies in a different
    =repository, modify that variable instead.
ns=env/extract
sort-key=d2

[env=cice_path_incl]
compulsory=false
description=CICE source extract list.
help=A list of directory paths to extract from the full CICE source tree.
    =The default value is determined by the env=ocean_version_file being used.
    =
    =Use env=cice_base to specify the base extract source location and
    =env=cice_rev to specify the revision of the base extract.
ns=env/extract
sort-key=d5
type=spaced_list

[env=cice_project_location]
compulsory=false
description=Location of the CICE project.
help=The location of the CICE project tree, in a Subversion repository.
    =This can be an FCM keyword, a Subversion URL or a file path.
    =Defaults to "fcm:cice".
    =
    =Unless explicitly specified with a full path to a repository,
    =the values of env=cice_base and env=cice_sources are taken relative
    =to this location.
ns=env/extract
sort-key=d1

[env=cice_rev]
compulsory=true
description=CICE base extract revision.
help=The revision of the base extract of the CICE source code.
    =The default value is determined by the env=ocean_version_file being used.
    =
    =You may use FCM keywords (vn4.1m1) or revision numbers (12345) here.
    =
    =The base extract source location is specified with env=cice_base.
ns=env/extract
pattern=(?i)^vn\d+\.\d+|^(\d+|head)$
sort-key=d3

[env=cice_sources]
compulsory=true
description=CICE branches and/or working copies.
help=When extracting the CICE source, merge in source code from the locations
    =and revisions listed here. These can be branches, working copies or even
    =the trunk. The merge is relative to the source code specified by
    =env=cice_base at the revision env=cice_rev.
    =
    =Complete FCM or Subversion URLs, or directory paths, may be used.
    =If only a partial path is provided this is taken to be relative to the
    =project tree associated with env=cice_project_location. For example,
    =if the project location is specified by the "fcm:cice" keyword URL, then
    =    branches/dev/user/vn3.4m1_testing
    =is equivalent to
    =    fcm:cice/branches/dev/user/vn3.4m1_testing.
    =
    =Use "@" to specify the revision of a repository location, e.g.
    =    branches/dev/user/vn3.0_testing@67890.
    =If a revision is not provided for a repository-based location,
    ="head" is assumed.
ns=env/extract
sort-key=d4
type=spaced_list

[env=compile_ocean]
compulsory=true
description=Compile ocean source.
help=Preprocess and build ocean source code.
    =
    =If provided, env=steplist and/or env=mirror_steplist will override
    =individual make step settings.
ns=env/steps
sort-key=02a
value-titles=yes,no
values=preprocess-ocean build-ocean,

[env=config_revision]
compulsory=true
description=Config file revision.
help=The revision of the config file in the repository. This must start with "@",
    =e.g. @HEAD. You may use FCM keywords (@vn10.0) or revision numbers
    =(@12345) here.
    =
    =If using a config file in a working copy, leave this field blank.
    =
    =Leaving this field blank when not using a working copy is equivalent to
    =supplying @HEAD.
ns=env/config
pattern=(?i)^(|@(vn\d+\.\d+|\d+|head))$
sort-key=a4

[env=config_root_path]
compulsory=true
description=Path to the fcm-make configs directory.
help=Path to the UM's fcm-make directory, containing the build configs.
    =This can be an FCM or Subversion URL or a path to a working copy.
    =
    =When working with the shared repository this must point to the
    =local mirror of the repository, not the shared repository itself.
ns=env/config
sort-key=a2

[env=cpp]
compulsory=false
description=C pre-processor.
help=The name or full path to the C pre-processor.
ns=env/keys
sort-key=a1

[env=cppflags]
compulsory=false
description=C pre-processor flags.
help=A space-separated list of C pre-processor flags.
    =
    =Setting this variable will replace any existing default flags.
ns=env/keys
sort-key=a2

[env=external_modules]
compulsory=false
description=External Fortran module dependencies.
help=A list of Fortran module dependencies from external libraries.
    =
    =If your build includes changes to the source code that require new Fortran
    =modules from an external library, list those module dependencies here.
    =This instructs FCM not to search for those modules in the source code,
    =which would cause the build source analysis to fail with missing
    =dependencies.
    =
    =This option is suitable for adding new dependencies. If you wish to
    =overwrite the default list of external modules that are excluded from the
    =dependency analysis, which differs according to the env=ocean_version_file
    =being used, see env=ocean_no_dep_module instead.
ns=env/compilation
#sort-key=d3
type=spaced_list

[env=extract]
compulsory=true
description=Extract the source code.
help=Extract source code from the selected locations.
    =
    =If provided, env=steplist and/or env=mirror_steplist will override
    =individual make step settings.
ns=env/steps
sort-key=01a
value-titles=yes,no
values=extract,

[env=fc]
compulsory=false
description=Fortran compiler.
help=The name or full path to the Fortran compiler.
ns=env/compilation
sort-key=c1

[env=fcflags_cice_overrides]
compulsory=true
description=Fortran compiler overrides for CICE.
help=A space-separated list of Fortran compiler flags that will be
    =applied to the CICE build, specifically intended for overriding the
    =default compilation flags.
    =
    =These flags are appended to the normal compilation settings and will
    =override any applicable existing settings.
    =
    =
    =Inter-variable dependencies:
    =
    =Variables defined in the [env] section of an app cannot refer to other
    =variables defined in the [env] section of that app (nor to variables
    =defined in the central fcm-make config files). If you want to refer to
    =an existing [env] variable (e.g. an include path) you must either expand
    =it in full wherever it is used, or you may use it directly in the
    =file/fcm-make.cfg file. Any variables defined using the latter method
    =must be defined before the include statement.
ns=env/compilation
sort-key=c4

[env=fcflags_nemo_overrides]
compulsory=true
description=Fortran compiler overrides for NEMO.
help=A space-separated list of Fortran compiler flags that will be
    =applied to the NEMO build, specifically intended for overriding the
    =default compilation flags.
    =
    =These flags are appended to the normal compilation settings and will
    =override any applicable existing settings.
    =
    =
    =Inter-variable dependencies:
    =
    =Variables defined in the [env] section of an app cannot refer to other
    =variables defined in the [env] section of that app (nor to variables
    =defined in the central fcm-make config files). If you want to refer to
    =an existing [env] variable (e.g. an include path) you must either expand
    =it in full wherever it is used, or you may use it directly in the
    =file/fcm-make.cfg file. Any variables defined using the latter method
    =must be defined before the include statement.
ns=env/compilation
sort-key=c3

[env=fcflags_omp]
compulsory=false
description=Fortran OpenMP compiler flags.
help=A space-separated list of Fortran compiler flags specifically
    =intended for activating or deactivating OpenMP.
    =
    =When running without OpenMP this is typically left blank.
    =
    =Setting this variable will override the OpenMP setting at env=openmp
    =and replace any existing default flags.
ns=env/compilation
sort-key=e1

[env=fcflags_prec]
compulsory=false
description=Fortran compiler flags for precision.
help=A space-separated list of Fortran compiler flags specifically
    =intended to set computational precision in memory.
    =
    =Setting this variable will replace any existing default flags.
ns=env/compilation
sort-key=c2

[env=fpp]
compulsory=false
description=Fortran pre-processor.
help=The name or full path to the Fortran pre-processor.
ns=env/keys
sort-key=b1

[env=fppflags]
compulsory=false
description=Fortran pre-processor flags.
help=A space-separated list of Fortran pre-processor flags.
    =
    =Setting this variable will replace any existing default flags.
ns=env/keys
sort-key=b2

[env=grib_api_path]
compulsory=false
description=GRIB API installation path.
help=The path to the GRIB API installation, not including the include, lib,
    =etc. directories.
    =
    =Setting this variable will replace any existing default GRIB API path.
ns=env/paths
sort-key=c1

[env=ioipsl_base]
compulsory=false
description=IOIPSL base extract source.
help=The basename for the extract of the IOIPSL source code, i.e. the place
    =in the NEMO or IOIPSL project tree to take the primary extract from,
    =such as the trunk or a branch. Defaults to "trunk".
    =
    =Unless a path to a Subversion repository is specified this is taken
    =to be relative to the location defined by env=ioipsl_project_location.
    =
    =This is the source code against which your branches, working
    =copies etc. will be compared against and merged with prior to the
    =build. For example, to build from a different trunk use
    =    fcm:um_nemo/trunk
    =or to build directly from a branch instead of merging changes into the
    =trunk, use
    =    fcm:ioipsl/branches/dev/user/vn3.0_trunk_override
    =or simply
    =    branches/dev/user/vn3.0_trunk_override
    =
    =Use env=ioipsl_rev to specify the revision of the base extract and
    =env=ioipsl_path_incl to specify which directories of the full source
    =tree to extract.
    =
    =Using an FCM keyword or Subversion URL here will override the value
    =of env=ioipsl_project_location for the primary extract only (i.e. not
    =for any branches). If all your source code (e.g. a trunk and related
    =branches) lies in a different repository, modify that variable instead.
ns=env/extract
sort-key=c2

[env=ioipsl_path_incl]
compulsory=false
description=IOIPSL source extract list.
help=A list of directory paths to extract from the full IOIPSL source tree.
    =The default value is determined by the env=ocean_version_file being used.
    =
    =Use env=ioipsl_base to specify the base extract source location and
    =env=ioipsl_rev to specify the revision of the base extract.
ns=env/extract
sort-key=c5
type=spaced_list

[env=ioipsl_project_location]
compulsory=false
description=Location of the IOIPSL project.
help=The location of the IOIPSL project tree, in a Subversion repository.
    =For some versions of IOIPSL this is also the NEMO project tree.
    =This can be an FCM keyword, a Subversion URL or a file path.
    =The default value is determined by the env=ocean_version_file being used,
    =being either "fcm:nemo" or "fcm:ioipsl".
    =
    =Unless explicitly specified with a full path to a repository,
    =the values of env=ioipsl_base and env=ioipsl_sources are taken relative
    =to this location.
ns=env/extract
sort-key=c1

[env=ioipsl_rev]
compulsory=true
description=IOIPSL base extract revision.
help=The revision of the base extract for the IOIPSL source code.
    =The default value is determined by the env=ocean_version_file being used.
    =
    =You may use FCM keywords (vn3.4) or revision numbers (12345) here.
    =
    =The base extract source location is specified with env=ioipsl_base.
ns=env/extract
pattern=(?i)^vn\d+\.\d+|^(\d+|head)$
sort-key=c3

[env=ioipsl_sources]
compulsory=true
description=A list of IOIPSL branches, working copies etc.
help=When extracting the IOIPSL source, merge in source code from the locations
    =and revisions listed here. These can be branches, working copies or even
    =the trunk. The merge is relative to the source code specified by
    =env=ioipsl_base at the revision env=ioipsl_rev.
    =
    =Complete FCM or Subversion URLs, or directory paths, may be used.
    =If only a partial path is provided this is taken to be relative to the
    =project tree associated with env=ioipsl_project_location. For example,
    =if the project location is specified by the "fcm:ioipsl" keyword URL, then
    =    branches/dev/user/vn3.0_testing
    =is equivalent to
    =    fcm:ioipsl/branches/dev/user/vn3.0_testing.
    =
    =Use "@" to specify the revision of a repository location, e.g.
    =    branches/dev/user/vn3.0_testing@67890.
    =If a revision is not provided for a repository-based location,
    ="head" is assumed.
ns=env/extract
sort-key=c4
type=spaced_list

[env=keys_cice]
compulsory=false
description=All CPP and FPP keys for CICE.
help=A list of all CPP keys used to pre-process CICE source code.
    =By default this is the sum of the two lists env=keys_cice_platform and
    =env=keys_cice_app. If provided, this supersedes both lists.
    =
    =Setting this variable will replace any existing list of CPP keys.
ns=env/keys
sort-key=d3
type=spaced_list

[env=keys_cice_app]
compulsory=false
description=Scientific and technical pre-processing keys for CICE.
help=A list of CPP and FPP keys used during CICE pre-processing.
    =These flags typically contain settings required by a particular
    =science configuration.
    =
    =Setting this variable will replace any existing list of CPP keys.
ns=env/keys
sort-key=d2
type=spaced_list

[env=keys_cice_platform]
compulsory=false
description=Platform-dependent keys for CICE builds.
help=A list of CPP/FPP keys for CICE, specific to this platform. These keys are
    =always applied and rarely if ever change between builds.
    =
    =Setting this variable will replace any existing list of CPP keys.
ns=env/keys
sort-key=d1
type=spaced_list

[env=keys_nemo]
compulsory=false
description=All CPP and FPP keys for NEMO.
help=A list of all CPP keys used to pre-process NEMO source code.
    =By default this is the sum of the two lists env=keys_nemo_platform and
    =env=keys_nemo_app. If provided, this supersedes both lists.
    =
    =Setting this variable will replace any existing list of CPP keys.
ns=env/keys
sort-key=c3
type=spaced_list

[env=keys_nemo_app]
compulsory=false
description=Scientific and technical pre-processing keys for NEMO.
help=A list of CPP and FPP keys used during NEMO pre-processing.
    =These flags typically contain settings required by a particular
    =science configuration.
    =
    =Setting this variable will replace any existing list of CPP keys.
ns=env/keys
sort-key=c2
type=spaced_list

[env=keys_nemo_platform]
compulsory=false
description=Platform-dependent keys for NEMO builds.
help=A list of CPP/FPP keys for NEMO, specific to this platform. These keys are
    =always applied and rarely if ever change between builds.
    =
    =Setting this variable will replace any existing list of CPP keys.
ns=env/keys
sort-key=c1
type=spaced_list

[env=ldflags_omp]
compulsory=false
description=Fortran OpenMP library flags.
help=A space-separated list of Fortran compiler flags for linking in an
    =OpenMP library.
    =
    =Setting this variable will override the OpenMP setting at env=openmp
    =and replace any existing default flags.
ns=env/compilation
sort-key=e2

[env=ldflags_overrides_prefix]
compulsory=true
description=Fortran library flags to add as a prefix.
help=A space-separated list of Fortran library flags to add to the linker
    =options. These flags are added as a prefix to the existing argument list.
    =
    =Any linker options which must go at the beginning of the argument list,
    =such as paths to libraries that should come first in the search path,
    =should be applied using this option.
    =
    =Linker options that must go at the end of the argument list should be
    =applied with [env=ldflags_overrides_suffix]. Any entirely new libraries or
    =options without existing precedent may be applied with either variable.
    =
    =
    =Inter-variable dependencies:
    =
    =Variables defined in the [env] section of an app cannot refer to other
    =variables defined in the [env] section of that app (nor to variables
    =defined in the central fcm-make config files). If you want to refer to
    =an existing [env] variable (e.g. a library path) you must either expand it
    =in full wherever it is used, or you may use it directly in the
    =file/fcm-make.cfg file. Any variables defined using the latter method
    =must be defined before the include statement.
ns=env/compilation
sort-key=d1

[env=ldflags_overrides_suffix]
compulsory=true
description=Fortran library flags to add as a suffix.
help=A space-separated list of Fortran library flags to add to the linker
    =options. These flags are added as a suffix to the existing argument list.
    =
    =Any linker options which must go at the end of the argument list, such as
    =flags which are needed to override existing (default) flags, should be
    =applied using this option.
    =
    =Linker options that must go at the start of the argument list should be
    =applied with [env=ldflags_overrides_prefix]. Any entirely new libraries or
    =options without existing precedent may be applied with either variable.
    =
    =
    =Inter-variable dependencies:
    =
    =Variables defined in the [env] section of an app cannot refer to other
    =variables defined in the [env] section of that app (nor to variables
    =defined in the central fcm-make config files). If you want to refer to
    =an existing [env] variable (e.g. a library path) you must either expand it
    =in full wherever it is used, or you may use it directly in the
    =file/fcm-make.cfg file. Any variables defined using the latter method
    =must be defined before the include statement.
ns=env/compilation
sort-key=d2

[env=mirror]
compulsory=true
description=Mirror extracted source code.
help=Mirror the extracted source code to a remote platform.
    =The mirror target is the host of the corresponding fcm_make2 task.
    =
    =If provided, env=steplist and/or env=mirror_steplist will override
    =individual make step settings.
    =
    =
    =Mirroring FCM configuration files:
    =
    =In addition to mirroring the source code, the mirror step also transfers
    =the FCM config files that contain the preprocess and build instructions
    =to the remote platform. These config files are generated by the fcm_make
    =task and then used by the corresponding fcm_make2 task.
    =
    =If you edit the list of preprocess or build steps for a remote platform
    =you must also include the mirror step so that the updated config files are
    =transferred across, even if no extract is required. Failure to do so would
    =result in no update of the FCM config files on the remote platform, and
    =the revised preprocess and build list would not take effect.
ns=env/steps
sort-key=01b
value-titles=yes,no
values=mirror,

[env=mirror_steplist]
compulsory=false
description=Steplist for the remote platform.
help=A space-separated list of compile steps to perform on the remote
    =platform. These are performed after the code has been extracted on the
    =local platform and mirrored to the remote platform.
    =
    =This should be a list of preprocess-* and build-* instructions for the
    =executable being compiled. Normally this is set to:
    =
    =    preprocess-ocean build-ocean
    =
    =In this case, the preprocess step could be removed by setting this
    =variable to
    =
    =    build-ocean
    =
    =only.
    =
    =If this is a two-platform build, setting this variable will override the
    =env=compile_ocean settings on the Make steps panel. It will have no effect
    =on single-platform builds.
ns=env/steps
sort-key=00b
type=spaced_list

[env=nemo_base]
compulsory=false
description=NEMO base extract source.
help=The basename for the extract of the NEMO source code, i.e. the place
    =in the NEMO project tree to take the primary extract from, such as
    =the trunk or a branch. Defaults to "trunk".
    =Unless a path to a Subversion repository is specified this is taken
    =to be relative to the location defined by env=nemo_project_location.
    =
    =This is the source code against which your branches, working
    =copies etc. will be compared against and merged with prior to the
    =build. To build directly from a branch instead of merging changes
    =into the trunk, use e.g.
    =    branches/dev/user/vn3.4_trunk_override.
    =
    =Use env=nemo_rev to specify the revision of the base extract and
    =env=nemo_path_incl to specify which directories of the full source tree
    =to extract.
    =
    =Using an FCM keyword or Subversion URL here will override the value
    =of env=nemo_project_location for the primary extract only (i.e. not
    =for any branches). If all your source code lies in a different
    =repository, modify that variable instead.
ns=env/extract
sort-key=b2

[env=nemo_path_incl]
compulsory=false
description=NEMO source extract list.
help=A list of directory paths to extract from the full NEMO source tree.
    =The default value is determined by the env=ocean_version_file being used.
    =
    =Use env=nemo_base to specify the base extract source location and
    =env=nemo_rev to specify the revision of the base extract.
ns=env/extract
sort-key=b5
type=spaced_list

[env=nemo_project_location]
compulsory=false
description=Location of the NEMO project.
help=The location of the NEMP project tree, in a Subversion repository.
    =This can be an FCM keyword, a Subversion URL or a file path. Defaults
    =to "fcm:nemo".
    =
    =Unless explicitly specified with a full path to a repository,
    =the values of env=um_base and env=um_sources are taken relative
    =to this location.
ns=env/extract
sort-key=b1

[env=nemo_rev]
compulsory=true
description=NEMO base extract revision.
help=The revision of the base extract of the NEMO source code.
    =The default value is determined by the env=ocean_version_file being used.
    =
    =You may use FCM keywords (vn4.1m1) or revision numbers (12345) here.
    =
    =The base extract source location is specified with env=nemo_base.
ns=env/extract
pattern=(?i)^vn\d+\.\d+|^(\d+|head)$
sort-key=b3

[env=nemo_sources]
compulsory=true
description=NEMO branches and/or working copies.
help=When extracting the NEMO source, merge in source code from the locations
    =and revisions listed here. These can be branches, working copies or even
    =the trunk. The merge is relative to the source code specified by
    =env=nemo_base at the revision env=nemo_rev.
    =
    =Complete FCM or Subversion URLs, or directory paths, may be used.
    =If only a partial path is provided this is taken to be relative to the
    =project tree associated with env=nemo_project_location. For example,
    =if the project location is specified base by the "fcm:nemo" keyword URL,
    =then
    =    branches/dev/user/vn3.4_testing
    =is equivalent to
    =    fcm:nemo/branches/dev/user/vn3.4_testing.
    =
    =Use "@" to specify the revision of a repository location, e.g.
    =    branches/dev/user/vn3.4_testing@67890.
    =If a revision is not provided for a repository-based location,
    ="head" is assumed.
ns=env/extract
sort-key=b4
type=spaced_list

[env=netcdf_inc_path]
compulsory=false
description=NetCDF include files path.
help=The path to the include files of a NetCDF installation.
    =
    =Setting this variable will replace any existing default path. It will
    =also override the path specified by env=netcdf_path for using NetCDF
    =include files. If both variables are provided this path takes precedence.
ns=env/paths
#trigger = env=netcdf_path: ;
sort-key=a2

[env=netcdf_lib_path]
compulsory=false
description=NetCDF library files path.
help=The path to the library files of a NetCDF installation.
    =
    =Setting this variable will replace any existing default path. It will
    =also override the path specified by env=netcdf_path for using NetCDF
    =library files. If both variables are provided this path takes precedence.
ns=env/paths
#trigger = env=netcdf_path: ;
sort-key=a3

[env=netcdf_path]
compulsory=false
description=NetCDF installation root path.
help=The path to the top level of the NetCDF installation.
    =The relative paths to the include and library files are defined
    =in the relevant compiler configuration file, e.g.
    =    fcm-make/meto-pwr7-xlf/inc/pwr7-*.cfg
    =Using this variable assumes these relative paths are correct.
    =
    =In some cases the relative paths may differ between NetCDF installations,
    =for example when changing from an installation which uses
    =    $netcdf_path/include
    =to another installation which uses
    =    $netcdf_path/inc
    =
    =If you need to specify either of these paths in full, use
    =env=netcdf_inc_path and env=netcdf_lib_path instead.
    =Those variables will override the path to either the include or library
    =files defined here, as appropriate.
ns=env/paths
sort-key=a1

[env=ocean_exec]
compulsory=false
description=Ocean executable name.
help=The name of the atmosphere executable to be built.
    =
    =The default value is set in the 'common' UM fcm-make configs.
ns=env/build
sort-key=b1

[env=ocean_no_dep_module]
description=Standard Fortran module dependencies.
help=A standard list of Fortran module dependencies from external libraries,
    =required by every ocean build. These files are typically not contained in
    =the source tree but provided by an external library instead (e.g. NetCDF),
    =and must be excluded from FCM's dependency analysis of the source code.
    =
    =The default value is determined by the env=ocean_version_file being used.
    =
    =Setting this variable will overwrite the default list of external modules,
    =meaning you must specify every external module dependency. If you only
    =need to add new modules, use env=external_modules instead.
ns=env/compilation
sort-key=a2
type=spaced_list

[env=ocean_program]
compulsory=false
description=Main program unit name.
help=The name of the Fortran program unit to be compiled, i.e. the top-level
    =unit "PROGRAM [name]".
    =
    =The default value is determined by the env=ocean_version_file being used.
ns=env/compilation
sort-key=a1

[env=ocean_version_file]
compulsory=true
description=Version-specific build information file.
help=The NEMO-CICE build system includes configuration files that contain
    =further information about the versions of NEMO and CICE being built.
    =These values provide defaults for:
    =
    =  -  extract locations and revisions (e.g. env=nemo_base, env=nemo_rev)
    =  -  source code to include from the full extract (e.g. env=nemo_path_incl)
    =  -  the name of the main program unit (env=ocean_program)
    =  -  Fortran modules to exclude from the build dependency analysis
    =     (env=ocean_no_dep_module)
    =  -  a list of manual object dependencies.
    =
    =This switch should be set to the appropriate version of NEMO-CICE being
    =compiled.
ns=env/extract
sort-key=a1
value-titles=NEMO 3.2; CICE 4.1, NEMO 3.4; CICE 4.1m1
values=nemo3.2-cice4.1-version.cfg,nemo3.4-cice4.1m1-version.cfg

[env=openmp]
compulsory=true
description=Compile with OpenMP.
help=Choose whether to apply OpenMP compiler and library flags to the build.
    =These flags are specfied in the UM's fcm-make/[platform]/inc/options
    =directory and are local to each platform.
    =
    =Use the option "defined by suite" to pass the variable $OPENMP down from
    =the suite, which allows the same fcm_make app to be used for both OpenMP
    =and no-OpenMP builds. This variable should be set to either openmp_on
    =for OpenMP builds, or openmp_off for no-OpenMP builds.
    =
    =OpenMP settings can be overridden using the compiler (env=fcflags_omp) and
    =library (env=ldflags_omp) OpenMP flags, which supersede this switch.
ns=env/build
sort-key=a2
value-titles=on,off,defined by suite
values=openmp_on,openmp_off,$OPENMP

[env=optimisation_level]
compulsory=true
description=Optimisation level for builds.
help=Compiler optimisation level; this chooses one of several
    =pre-selected sets of optimisation options that determine how much
    =automatic optimisation the compiler is allowed to do. The available
    =choices are:
    =
    =    High  -  Maximum optimisation allowed, typically for NWP and
    =                operational suites.
    =    Safe  -  Moderate level of optimisation, typically for climate
    =                suites.
    =    Debug  -  No automatic optimisation.
    =    Rigorous  -  No automatic optimisation and additional compiler
    =                       checking options.
    =
    =Increasing the optimisation level generally results in a faster executable,
    =at the cost of increasing the risk of loss of bit-comparison. The lowest
    =optimisation settings are typically used to debug problematic code.
    =
    =When using a prebuild the env=prebuild setting should point to a build at
    =the same optimisation level as is set here, where possible.
ns=env/build
sort-key=a1
values=high,safe,debug,rigorous

[env=platform_config_dir]
compulsory=true
description=Platform configs directory.
help=Name of a directory containing site- and platform-specific
    =configuration files. This should be a sub-directory of the fcm-make
    =directory in the UM source code.
    =
    =Only one configuration directory at a time should be selected.
ns=env/config
sort-key=a1
trigger=env=mirror: this != 'meto-x86-ifort' and this != 'kma-xe6-cce';
       =env=mirror_steplist: this != 'meto-x86-ifort' and this != 'kma-xe6-cce';
widget[rose-config-edit]=rose.config_editor.valuewidget.choice.ChoicesValueWidget
                        =--editable
                        =meto-pwr7-xlf
                        =meto-xc40-cce

[env=prebuild]
compulsory=true
description=Prebuild location.
help=The location of an existing ocean build. This should be the full path
    =to the fcm_make* (task name) directory on the local platform.
    =
    =A space-separated list of prebuilds is also accepted; the order of
    =precedence for target files is from right-to-left.
    =
    =When using a prebuild the new build will inherit object files,
    =module interface files etc. from the prebuild wherever possible,
    =only pre-processing and compiling files that differ between the two.
    =Choosing a suitable prebuild can therefore greatly reduce the
    =overall build time.
ns=env/build
sort-key=a3
type=spaced_list

[env=prism_path]
compulsory=false
description=PRISM library path.
help=The path to the PRISM library, used for coupling with OASIS.
    =
    =Setting this variable will replace any existing default path.
ns=env/paths
sort-key=d1

[env=steplist]
compulsory=false
description=Steplist for the local platform.
help=A space-separated list of compile steps to perform on the local
    =platform.
    =
    =For a single-platform build this is normally all the steps
    =required to compile an executable: extract, preprocess and build.
    =
    =For a two-platform build this normally consists only of extract and mirror
    =steps:
    =
    =    extract mirror
    =
    =In this case rebuilding an executable without re-extracting the code
    =could be achieved by removing the extract step.
    =
    =Setting this variable will override the env=extract and env=mirror
    =settings; if this is a two-platform build it will also override the
    =env=compile_ocean settings on the Make steps panel.
    =
    =
    =Mirroring FCM configuration files:
    =
    =In addition to mirroring the source code, the mirror step also transfers
    =the FCM config files that contain the preprocess and build instructions
    =to the remote platform. These config files are generated by the fcm_make
    =task and then used by the corresponding fcm_make2 task.
    =
    =If you edit the list of preprocess or build steps for a remote platform
    =you must also include the mirror step so that the updated config files are
    =transferred across, even if no extract is required. Failure to do so would
    =result in no update of the FCM config files on the remote platform, and
    =the revised preprocess and build list would not take effect.
ns=env/steps
sort-key=00a
type=spaced_list
